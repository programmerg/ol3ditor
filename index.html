<!DOCTYPE html>
<html lang="en">
	<head>
        <meta charset="utf-8">
        <title>OL3ditor</title>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.12.1/ol.min.css" rel="stylesheet">
        <link href="ol3ditor.css" rel="stylesheet">
        <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        
        <div id="startscreen" class="startscreen active">
            <div class="container">
                <h1><img src="res/logo.png" alt="OL3ditor" title="OL3ditor" style="margin-left:-10px"> <small>v0.11</small></h1>
                <p><em>Desktop-like functionalities for the OpenLayers 3 web mapping library.</em></p>
                <p>Author: Gergő Gelencsér <small>(<a href="http://github.com/programmerg/" target="_blank">github.com/programmerg</a>)</small><br>
                Code licensed under the 2-Clause BSD.<br>
                Follow the project at: <a href="http://github.com/programmerg/ol3ditor/" target="_blank">github.com/programmerg/ol3ditor</a></p>
                <p style="color:#c2c2c2">— or —</p>
                <p><a href="#back">Take a try!</a><noscript> <mark class="text-danger">Warning! This site require javascript. Please, enable it!</mark></noscript></p>
                
            </div>
        </div>
	
        <div class="application pinned-toolbar pinned-layermanager">
			<div id="menubar" class="menubar">
                <a href="#toolbar" class="pin active" title="Pin/unpin menubar"><i class="glyphicon glyphicon-pushpin"></i></a>
				<ul>
					<li class="branding"><a href="#startscreen">OL3ditor</a></li>
					<li class="active"><a href="#maptools" role="tab" data-toggle="tab">Map</a></li>
					<li><a href="#layertools" role="tab" data-toggle="tab">Layer</a></li>
					<li><a href="#featuretools" role="tab" data-toggle="tab">Feature</a></li>
					<li><a href="#analysistools" role="tab" data-toggle="tab">Analysis</a></li>
				</ul>
			</div>
			<div id="toolbar" class="toolbar tab-content pinned">
				<div id="maptools" class="tab-pane active showing"></div>
				<div id="layertools" class="tab-pane"></div>
				<div id="featuretools" class="tab-pane"></div>
				<div id="analysistools" class="tab-pane"></div>
			</div>
			<div class="map-container">
				<div id="layermanager" class="layermanager pinned">
                    <div class="bar-title"><a href="#layermanager" class="pin active" title="Pin/unpin layer manager"><i class="glyphicon glyphicon-pushpin"></i></a> Layer manager</div>
                </div>
				<div id="attributemanager" class="attributemanager">
                    <div class="bar-title"><a href="#attributemanager" class="pin" title="Pin/unpin attribute manager"><i class="glyphicon glyphicon-pushpin"></i></a> Attribute manager</div>
                </div>
				<div id="map" class="map" tabindex="-1" style="cursor:default"></div>
			</div>
            <div id="statusbar" class="statusbar"></div>
        </div>
    
		<div id="addraster" class="modal fade" role="dialog" tabindex="-1">
		  <div class="modal-dialog">
			<div class="modal-content">
			<form id="addraster_form">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Add Raster layer</h4>
			  </div>
			  <div class="modal-body">
				<div class="form-horizontal">
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Display name:</label>
						<div class="col-sm-9">
							<input type="text" name="displayname" class="form-control input-sm">
						</div>
					</div>
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Format:</label>
						<div class="col-sm-9">
							<select name="format" class="form-control input-sm" required="required">
								<option value="wms">WMS - Web Map Service</option>
								<option value="bing">BingMaps</option>
								<option value="mapquest">MapQuest</option>
								<option value="osm">OpenStreetMap</option>
								<option value="tifw">TIFW - Georeferenced TIF</option>
								<option value="jpw">JPW - Georeferenced JPG</option>
							</select>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Server URL:</label>
						<div class="col-sm-9">
							<div class="input-group">
								<input type="text" id="wmsurl" name="server" class="form-control input-sm" required="required" value="http://demo.opengeo.org/geoserver/wms">
								<span class="input-group-btn">
									<button type="button" id="checkwmslayer" class="btn btn-sm btn-default">Check for layers</button>
								</span>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Layer name:</label>
						<div class="col-sm-9">
							<select name="layer" class="form-control input-sm" required="required"></select>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Projection:</label>
						<div class="col-sm-9">
							<input type="text" name="projection" class="form-control input-sm" value="EPSG:4326">
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-9 col-sm-offset-3">
							<div class="checkbox"><label><input type="checkbox" name="tiled"> Tiled</label></div>
						</div>
					</div>
				</div>
			  </div>
			  <div class="modal-footer">
				<button type="submit" class="btn btn-sm btn-primary">Add layer</button>
				<button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Cancel</button>
			  </div>
			</form>
			</div>
		  </div>
		</div>
		
		<div id="addvector" class="modal fade" role="dialog" tabindex="-1">
		  <div class="modal-dialog">
			<div class="modal-content">
			<form id="addvector_form">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Add Vector layer</h4>
			  </div>
			  <div class="modal-body">
				<div class="form-horizontal">
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Display name:</label>
						<div class="col-sm-9">
							<input type="text" name="displayname" class="form-control input-sm">
						</div>
					</div>
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Format:</label>
						<div class="col-sm-9">
							<select name="format" class="form-control input-sm" required="required" onchange="if(this.value!='wfs'){$('#wfs_input').hide();$('#file_input').show()}else{$('#wfs_input').show();$('#file_input').hide()}">
								<option value="wfs" selected="selected">WFS - Web Feature Service</option>
								<option value="esrijson">EsriJSON</option>
								<option value="geojson">GeoJSON</option>
								<option value="topojson">TopoJSON</option>
								<option value="gpx">GPX</option>
								<option value="igc">IGC</option>
								<option value="kml">KML</option>
								<option value="mvt">MVT - Mapbox</option>
								<option value="osm">OSM</option>
								<option value="wkt">WKT - Well Known Text</option>
							</select>
						</div>
					</div>
					<div id="wfs_input">
						<div class="form-group">
							<label class="control-label input-sm col-sm-3">Server URL:</label>
							<div class="col-sm-9">
								<div class="input-group">
									<input type="text" name="server" class="form-control input-sm" value="http://demo.mapserver.org/cgi-bin/wfs">
									<span class="input-group-btn">
										<button type="button" id="checkwmslayer" class="btn btn-sm btn-default">Check for layers</button>
									</span>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label class="control-label input-sm col-sm-3">Layer name:</label>
							<div class="col-sm-9">
								<input type="text" name="layer" class="form-control input-sm">
							</div>
						</div>
					</div>
					<div id="file_input" style="display:none">
						<div class="form-group">
							<label class="control-label input-sm col-sm-3">Vector file:</label>
							<div class="col-sm-9">
								<input type="file" name="file" class="form-control input-sm">
							</div>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Projection:</label>
						<div class="col-sm-9">
							<input type="text" name="projection" class="form-control input-sm" value="EPSG:4326">
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-9 col-sm-offset-3">
							<div class="checkbox"><label><input type="checkbox" name="tiled"> Tiled</label></div>
						</div>
					</div>
				</div>
			  </div>
			  <div class="modal-footer">
				<button type="submit" class="btn btn-sm btn-primary">Add layer</button>
				<button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Cancel</button>
			  </div>
			</form>
			</div>
		  </div>
		</div>
			
		<div id="newvector" class="modal fade" role="dialog" tabindex="-1">
		  <div class="modal-dialog">
			<div class="modal-content">
			<form id="newvector_form">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">New Vector layer</h4>
			  </div>
			  <div class="modal-body">
				<div class="form-horizontal">
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Display name:</label>
						<div class="col-sm-9">
							<input type="text" name="displayname" class="form-control input-sm">
						</div>
					</div>
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Type:</label>
						<div class="col-sm-9">
							<select name="type" required="required" class="form-control input-sm">
								<option value="point">Point</option>
								<option value="line">Line</option>
								<option value="polygon">Polygon</option>
								<option value="geomcollection">Geometry Collection</option>
							</select>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label input-sm col-sm-3">Projection:</label>
						<div class="col-sm-9">
							<input type="text" name="projection" class="form-control input-sm" value="EPSG:4326">
						</div>
					</div>
				</div>
			  </div>
			  <div class="modal-footer">
				<button type="submit" class="btn btn-sm btn-primary">Add layer</button>
				<button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Cancel</button>
			  </div>
			</form>
			</div>
		  </div>
		</div>
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>
		<script src="toolbar.js"></script>
        <!-- script type="text/javascript" src="ol3cesium/Cesium.js"></script -->
        <!-- script type="text/javascript" src="ol3cesium/ol3cesium.js"></script -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.12.1/ol-debug.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.12/proj4.js"></script>
		<script type="text/javascript" src="src/Editor.js"></script>
		<!-- script type="text/javascript" src="src/cesium.js"></script -->
		<script type="text/javascript" src="src/Geolocate.js"></script>
		<script type="text/javascript" src="src/EditingControls.js"></script>
		<script type="text/javascript" src="src/SelectionControls.js"></script>
		<script type="text/javascript" src="src/Interaction.js"></script>
		<!-- <script type="text/javascript" src="src/interaction.measure.js"></script> -->
		<script type="text/javascript" src="src/LayerManager.js"></script>
		<script type="text/javascript" src="src/LayerControls.js"></script>
		<script type="text/javascript" src="src/Message.js"></script>
		<script type="text/javascript" src="src/Print.js"></script>
		<script type="text/javascript" src="src/Projection.js"></script>
		<script type="text/javascript" src="src/Rotation.js"></script>
		<script type="text/javascript" src="src/ShareMap.js"></script>
		<script type="text/javascript" src="src/ZoomHistory.js"></script>
		<script type="text/javascript" src="src/ZoomTo.js"></script>
		<script type="text/javascript">
		
//function init() {
//    document.removeEventListener('DOMContentLoaded', init);

    proj4.defs("EPSG:23700","+title=HD72 EOV +proj=somerc +lat_0=47.14439372222222 +lon_0=19.04857177777778 +k_0=0.99993 +x_0=650000 +y_0=200000 +ellps=GRS67 +towgs84=52.17,-71.82,-14.9,0,0,0,0 +units=m +no_defs");
    var eov = new ol.proj.Projection({
        code: 'EPSG:23700',
        extent: [421391.21, 48212.58, 934220.63, 366660.88],
        worldExtent: [16.11, 45.74, 22.9, 48.58]
    });

    var editor = new ol.Editor({
        target: 'map',
        view: new ol.View({
            projection: 'EPSG:3857',
            extent: ol.proj.get('EPSG:3857').getExtent(),
            center: [0, 0],
            zoom: 2
        }),
        layers: [
            new ol.layer.Tile({
                name: 'OpenStreetMap',
                source: new ol.source.OSM()
            }),
            new ol.layer.Vector({
                name: 'Countries',
                source: new ol.source.Vector({
                    url: 'countries.geojson',
                    format: new ol.format.GeoJSON()
                })
            })/*,
            new ol.layer.Tile({
                name: 'Blue Marble',
                source: new ol.source.TileWMS({
                    url: 'http://demo.opengeo.org/geoserver/wms',
                    params: { layers: 'bluemarble', format: 'image/png' }
                })
            }),
            new ol.layer.Tile({
                name: 'Grand Canyon',
                source: new ol.source.XYZ({
                    url: 'http://tileserver.maptiler.com/grandcanyon/{z}/{x}/{y}.png'
                })
            })*/
        ],
        controls: [
			new ol.control.Rotate(),
			new ol.control.ScaleLine(),
			new ol.control.ZoomSlider(),
			new ol.control.Attribution({ collapsible: false }),
            new ol.control.LayerManager({ target: 'layermanager' }),
			//new ol.control.Cesium({ target: 'maptools' }),
			new ol.control.Zoom({ target: 'maptools', zoomInLabel: ' ', zoomOutLabel: ' ' }),
			new ol.control.ZoomHistory({ target: 'maptools' }), 
			new ol.control.ZoomToExtent({ target: 'maptools', label: ' ' }),
			new ol.control.Print({ target: 'maptools' }),
			new ol.control.ShareMap({ target: 'maptools', autoUpdate: false }),
			new ol.control.Geolocate({ target: 'maptools' }),
            new ol.control.ZoomToLayer({ target: 'layertools' }),
            new ol.control.LayerControls({ target: 'layertools' }),
            new ol.control.ZoomToSelection({ target: 'featuretools' }),
            new ol.control.SelectionControls({ target: 'featuretools' }),
            new ol.control.EditingControls({ target: 'featuretools' }),
            new ol.control.Message({ target: 'statusbar' }),
            new ol.control.MousePosition({
                target: 'statusbar',
                className: 'ol-mouse-position ol-control ol-unselectable',
                coordinateFormat: ol.coordinate.createStringXY(3)
            }),
            new ol.control.Rotation({ target: 'statusbar' }),
			new ol.control.Projection({
                target: 'statusbar',
                projections: ['EPSG:3857','EPSG:4326', eov]
			})
        ],
        loadTilesWhileAnimating: true,
        loadTilesWhileInteracting: true,
        logo: false
    });

    
    document.getElementById('newvector_form').addEventListener('submit', function (evt) {
        evt.preventDefault();
        editor.getLayerManager().newVectorLayer(this);
		$('#newvector').modal('hide');
    });
    document.getElementById('addvector_form').addEventListener('submit', function (evt) {
        evt.preventDefault();
        editor.getLayerManager().addVectorLayer(this);
		$('#addvector').modal('hide');
    });
    document.getElementById('addraster_form').addEventListener('submit', function (evt) {
        evt.preventDefault();
        editor.getLayerManager().addRasterLayer(this);
		$('#addraster').modal('hide');
    });
    document.getElementById('checkwmslayer').addEventListener('click', function () {
        editor.getLayerManager().checkWmsLayer(this.form);
    });
    document.getElementById('wmsurl').addEventListener('change', function () {
        editor.getLayerManager().removeContent(this.form.layer);
        editor.getLayerManager().removeContent(this.form.format);
    });
	
//}
//document.addEventListener('DOMContentLoaded', init);

		</script>
	</body>
</html>